<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import de.jensd.fx.glyphs.fontawesome.FontAwesomeIconView?>

<BorderPane xmlns="http://javafx.com/javafx/23"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="ma.ensa.healthcare.ui.controllers.DashboardController"
            styleClass="dashboard-container">

    <!-- SIDEBAR NAVIGATION -->
    <left>
        <VBox styleClass="sidebar" prefWidth="280" spacing="5">
            <padding>
                <Insets top="20" right="15" bottom="20" left="15"/>
            </padding>

            <!-- Logo & User Info -->
            <VBox alignment="CENTER" spacing="10" styleClass="sidebar-header">
                <padding>
                    <Insets bottom="30"/>
                </padding>
                
                <FontAwesomeIconView glyphName="HEARTBEAT" size="50" fill="WHITE"/>
                
                <Label text="Healthcare System" style="-fx-text-fill: white; -fx-font-size: 18px; -fx-font-weight: bold;"/>
                
                <Separator prefWidth="200" style="-fx-background-color: rgba(255,255,255,0.2);"/>
                
                <VBox alignment="CENTER" spacing="5">
                    <Label fx:id="userNameLabel" text="Admin" style="-fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold;"/>
                    <Label fx:id="userRoleLabel" text="Administrateur" style="-fx-text-fill: rgba(255,255,255,0.7); -fx-font-size: 12px;"/>
                </VBox>
            </VBox>

            <!-- Navigation Buttons -->
            <VBox spacing="5" VBox.vgrow="ALWAYS">
                <padding>
                    <Insets top="20"/>
                </padding>

                <Button fx:id="btnHome" text="Accueil" styleClass="sidebar-button" onAction="#showHome" prefWidth="250">
                    <graphic>
                        <FontAwesomeIconView glyphName="HOME" size="16" fill="WHITE"/>
                    </graphic>
                </Button>

                <Button fx:id="btnPatients" text="Patients" styleClass="sidebar-button" onAction="#showPatients" prefWidth="250">
                    <graphic>
                        <FontAwesomeIconView glyphName="USERS" size="16" fill="WHITE"/>
                    </graphic>
                </Button>

                <Button fx:id="btnRendezVous" text="Rendez-vous" styleClass="sidebar-button" onAction="#showRendezVous" prefWidth="250">
                    <graphic>
                        <FontAwesomeIconView glyphName="CALENDAR" size="16" fill="WHITE"/>
                    </graphic>
                </Button>

                <Button fx:id="btnConsultations" text="Consultations" styleClass="sidebar-button" onAction="#showConsultations" prefWidth="250">
                    <graphic>
                        <FontAwesomeIconView glyphName="STETHOSCOPE" size="16" fill="WHITE"/>
                    </graphic>
                </Button>

                <Button fx:id="btnFactures" text="Facturation" styleClass="sidebar-button" onAction="#showFactures" prefWidth="250">
                    <graphic>
                        <FontAwesomeIconView glyphName="MONEY" size="16" fill="WHITE"/>
                    </graphic>
                </Button>

                <Button fx:id="btnMedecins" text="Médecins" styleClass="sidebar-button" onAction="#showMedecins" prefWidth="250">
                    <graphic>
                        <FontAwesomeIconView glyphName="USER_MD" size="16" fill="WHITE"/>
                    </graphic>
                </Button>

                <Separator style="-fx-background-color: rgba(255,255,255,0.2);"/>

                <Button fx:id="btnSettings" text="Paramètres" styleClass="sidebar-button" onAction="#showSettings" prefWidth="250">
                    <graphic>
                        <FontAwesomeIconView glyphName="COG" size="16" fill="WHITE"/>
                    </graphic>
                </Button>

                <Region VBox.vgrow="ALWAYS"/>

                <Button text="Déconnexion" styleClass="sidebar-button" onAction="#handleLogout" prefWidth="250"
                        style="-fx-background-color: #F44336;">
                    <graphic>
                        <FontAwesomeIconView glyphName="SIGN_OUT" size="16" fill="WHITE"/>
                    </graphic>
                </Button>
            </VBox>
        </VBox>
    </left>

    <!-- MAIN CONTENT AREA -->
    <center>
        <VBox spacing="0" style="-fx-background-color: #F5F5F5;">
            
            <!-- TOP BAR -->
            <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-background-color: white; -fx-padding: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 5, 0, 0, 2);">
                
                <Label fx:id="pageTitleLabel" text="Tableau de Bord" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #333;"/>
                
                <Region HBox.hgrow="ALWAYS"/>
                
                <HBox spacing="15" alignment="CENTER_RIGHT">
                    <Button styleClass="action-button" prefHeight="35">
                        <graphic>
                            <FontAwesomeIconView glyphName="BELL" size="16" fill="WHITE"/>
                        </graphic>
                    </Button>
                    
                    <Button styleClass="action-button" prefHeight="35">
                        <graphic>
                            <FontAwesomeIconView glyphName="SEARCH" size="16" fill="WHITE"/>
                        </graphic>
                    </Button>
                </HBox>
            </HBox>

            <!-- DYNAMIC CONTENT CONTAINER -->
            <StackPane fx:id="contentArea" VBox.vgrow="ALWAYS">
                <padding>
                    <Insets top="30" right="30" bottom="30" left="30"/>
                </padding>
            </StackPane>
        </VBox>
    </center>

</BorderPane>